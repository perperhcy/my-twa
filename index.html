<!-- <!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html> -->

<!DOCTYPE html>
<html>

<head>
    <title>输入框示例</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // 这个函数将在点击按钮时被调用
        function getInputValue() {
            // 获取输入框的元素
            var inputElement = document.getElementById("inputField");
            // 获取输入框的内容
            var inputValue = inputElement.value;
            // 显示输入框的内容
            // alert("输入的内容是: " + inputValue);

            // 等待 Telegram Web App 初始化完成
            Telegram.WebApp.ready(function () {
                // 选择按钮元素

            });
            
            Telegram.WebApp.isClosingConfirmationEnabled = true

            const invoiceLink = inputValue;

            // 打开支付窗口
            Telegram.WebApp.openInvoice(invoiceLink, function (paymentResult) {
                if (paymentResult.status === 'paid') {
                    //请求校验订单接口
                } else {
                    //alert('支付失败，请重试。');
                }
            });

            /*
invoiceClosed	Bot API 6.1+ Occurrs when the opened invoice is closed.
eventHandler receives an object with the two fields: url – invoice link provided and status – one of the invoice statuses:
- paid – invoice was paid successfully,
- cancelled – user closed this invoice without paying,
- failed – user tried to pay, but the payment was failed,
- pending – the payment is still processing. The bot will receive a service message about a successful payment when the payment is successfully paid.
            */
        }
    </script>
</head>

<body>
    <h1>获取输入框内容示例</h1>
    <input type="text" id="inputField" placeholder="请输入内容">
    <button onclick="getInputValue()">获取内容</button>
</body>

</html>

<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Mini App</title>
</head>
<body>
    <h1>Telegram Mini App</h1>
    <img src="https://th.bing.com/th/id/OIP.jTMqvQYsHNZFFuGGx80SGQHaEK?w=284&h=180&c=7&r=0&o=5&pid=1.7" alt="描述图片内容">

    <div id="user-info"></div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Wait until the Telegram Web Apps JavaScript API is ready
        Telegram.WebApp.onEvent('ready', function() {

        });
        const user = Telegram.WebApp.initDataUnsafe.user;
        const userInfoDiv = document.getElementById('user-info');
        console.log('user:' + user);    

            if (user) {
                const userName = user.first_name + ' ' + user.last_name;
                const userAvatar = user.photo_url ? `<img src="${user.photo_url}" alt="User Avatar">` : 'No avatar available';

                console.log('userAvatar:' + user.photo_url);    

                userInfoDiv.innerHTML = `
                    <p>Name: ${userName}</p>
                    <p>Username: ${user.username}</p>
                    <div>${userAvatar}</div>
                `;
            } else {
                console.log('No user data available');    
                const userAvatar = `<img src="https://th.bing.com/th/id/OIP.jTMqvQYsHNZFFuGGx80SGQHaEK?w=284&h=180&c=7&r=0&o=5&pid=1.7" alt="User Avatar">`;
                userInfoDiv.innerHTML = `
                    <div>${userAvatar}</div>
                `;  
            }
    </script>
</body>
</html>
-->

